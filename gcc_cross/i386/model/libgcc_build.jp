未完成だが試しに以下を試してみた.

% cd /media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG/gcc-10.2.0.x86_16-elf.mine
% make all-target-libgcc
...
checking for suffix of object files... configure: error: in `/media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG/gcc-10.2.0.m68hc11-elf.mine/m68hc11-elf/libgcc':
configure: error: cannot compute suffix of object files: cannot compile
See `config.log' for more details
make: *** [Makefile:12629: configure-target-libgcc]
%

これは自前の m68hc11-elf-gcc で既に経験していたエラーで, d10v-elf-gcc, z8k-coff-gcc,
z80-elf-gcc で似た回避方法を知っていたので以下のように修正した:

bool x86_16_function_value_regno_p(unsigned int regno)
{
  return regno == AX_REGNUM;
}

#undef TARGET_FUNCTION_VALUE_REGNO_P
#define TARGET_FUNCTION_VALUE_REGNO_P x86_16_function_value_regno_p

そしてもう一度トライ:
% make all-target-libgcc
...
checking for suffix of object files... configure: error: in `/media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG/gcc-10.2.0.x86_16-elf.mine/x86_16-elf/libgcc':
configure: error: cannot compute suffix of object files: cannot compile
See `config.log' for more details
make: *** [Makefile:12629: configure-target-libgcc] エラー 1
%

エラーを回避できていないらしい. m68hc11-elf-gcc のときにやったように地道に調べてみる.

Makefile を以下のように @ を削除した:
configure-target-libgcc: 
	r=`${PWD_COMMAND}`; export r; \

% make configure-target-libgcc
...
checking for x86_16-elf-gcc...  /media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG/gcc-10.2.0.x86_16-elf.mine/host-i686-pc-linux-gnu/gcc/xgcc -B/media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG/gcc-10.2.0.x86_16-elf.mine/host-i686-pc-linux-gnu/gcc/ -B/media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG/x86_16-elf/bin/ -B/media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG/x86_16-elf/lib/ -isystem /media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG/x86_16-elf/include -isystem /media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG/x86_16-elf/sys-include   
checking for suffix of object files... configure: error: in `/media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG/gcc-10.2.0.x86_16-elf.mine/x86_16-elf/libgcc':
configure: error: cannot compute suffix of object files: cannot compile
See `config.log' for more details
make: *** [Makefile:12629: configure-target-libgcc] エラー 1
%

これは x86_16-elf/libgcc で configure を実行してエラーしていると思われる.

% cd x86_16-elf/libgcc
% cat x
/media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG/gcc-10.2.0.x86_16-elf.mine/libgcc/configure --srcdir=../.././libgcc --cache-file=./config.cache --enable-multilib --with-cross-host=i686-pc-linux-gnu --prefix=/media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG --enable-languages=c,c++,fortran,lto,objc --program-transform-name=s/^/x86_16-elf-/ --disable-option-checking --with-target-subdir=x86_16-elf --build=i686-pc-linux-gnu --host=x86_16-elf --target=x86_16-elf
% sh -vx x
...
checking for target glibc version... 2.11
*** Configuration x86_16-unknown-elf not supported
%

違うエラーが発生している. make を実行したときにログが出るようにするべき.

Makefile を以下のように修正:

configure-target-libgcc: 
...
	CONFIG_SITE=no-such-file $(SHELL) -vx \
                                           ★

これでもう一度トライ:
% make configure-target-libgcc
...
+ printf '%s\n' 'configure:3804:  /media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG/gcc-10.2.0.x86_16-elf.mine/host-i686-pc-linux-gnu/gcc/xgcc -B/media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG/gcc-10.2.0.x86_16-elf.mine/host-i686-pc-linux-gnu/gcc/ -B/media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG/x86_16-elf/bin/ -B/media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG/x86_16-elf/lib/ -isystem /media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG/x86_16-elf/include -isystem /media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG/x86_16-elf/sys-include    -c -g -O2  conftest.c >&5'
+ ac_status=1
+ printf '%s\n' 'configure:3808: $? = 1'
+ test 1 = 0
+ printf '%s\n' 'configure: failed program was:'
+ sed 's/^/| /' conftest.c
+ printf '%s\n' 'configure:3822: error: in `/media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG/gcc-10.2.0.x86_16-elf.mine/x86_16-elf/libgcc'\'':'
+ printf '%s\n' 'configure: error: in `/media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG/gcc-10.2.0.x86_16-elf.mine/x86_16-elf/libgcc'\'':'
configure: error: in `/media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG/gcc-10.2.0.x86_16-elf.mine/x86_16-elf/libgcc':
+ as_fn_error 0 'cannot compute suffix of object files: cannot compile
See `config.log'\'' for more details' 3824 5
...
%

それっぽい.

% cd x86_16-elf/libgcc/
% cat conftest.c
int main()
{
  return 0;
}
% /media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG/gcc-10.2.0.x86_16-elf.mine/host-i686-pc-linux-gnu/gcc/xgcc -B/media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG/gcc-10.2.0.x86_16-elf.mine/host-i686-pc-linux-gnu/gcc/ -B/media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG/x86_16-elf/bin/ -B/media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG/x86_16-elf/lib/ -isystem /media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG/x86_16-elf/include -isystem /media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG/x86_16-elf/sys-include    -c -g -O2  conftest.c
/media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG/gcc-10.2.0.x86_16-elf.mine/host-i686-pc-linux-gnu/gcc/as: 106 行: exec: -o: 無効なオプションです
exec: 使用法: exec [-cl] [-a name] [command [arguments ...]] [redirection ...]
% ls /media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG/gcc-10.2.0.x86_16-elf.mine/host-i686-pc-linux-gnu/gcc/as
/media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG/gcc-10.2.0.x86_16-elf.mine/host-i686-pc-linux-gnu/gcc/as*
% file /media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG/gcc-10.2.0.x86_16-elf.mine/host-i686-pc-linux-gnu/gcc/as
/media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG/gcc-10.2.0.x86_16-elf.mine/host-i686-pc-linux-gnu/gcc/as: POSIX shell script, ASCII text executable
%

おそらく as を起動できていないのが原因. x86_16-elf-gcc は i386-elf-as を起動するのが
期待値なのだがおそらくそれができていない.

% /media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG/gcc-10.2.0.x86_16-elf.mine/host-i686-pc-linux-gnu/gcc/cc1 -quiet -iprefix /media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG/gcc-10.2.0.x86_16-elf.mine/host-i686-pc-linux-gnu/gcc/../lib/gcc/x86_16-elf/10.2.0/ -isystem /media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG/gcc-10.2.0.x86_16-elf.mine/host-i686-pc-linux-gnu/gcc/include -isystem /media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG/gcc-10.2.0.x86_16-elf.mine/host-i686-pc-linux-gnu/gcc/include-fixed -isystem /media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG/x86_16-elf/include -isystem /media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG/x86_16-elf/sys-include conftest.c -quiet -dumpbase conftest.c -auxbase conftest -g -O2 -o /tmp/ccThqT7Y.s
% sh -vx /media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG/gcc-10.2.0.x86_16-elf.mine/host-i686-pc-linux-gnu/gcc/as -o conftest.o /tmp/ccThqT7Y.s
...
+ case "$original" in
+ exec -o conftest.o /tmp/ccThqT7Y.s
/media/ca850f52-0605-42a7-9fd4-899de9edf461/work/GNU_LANG/gcc-10.2.0.x86_16-elf.mine/host-i686-pc-linux-gnu/gcc/as: 106 行: exec: -o: 無効なオプションです
exec: 使用法: exec [-cl] [-a name] [command [arguments ...]] [redirection ...]
%

以下のように修正した:

ORIGINAL_AS_FOR_TARGET="i386-elf-as"   ★
ORIGINAL_LD_FOR_TARGET="i386-elf-ld"   ★
ORIGINAL_LD_BFD_FOR_TARGET="/.bfd"
ORIGINAL_LD_GOLD_FOR_TARGET="/.gold"
ORIGINAL_PLUGIN_LD_FOR_TARGET=""
ORIGINAL_NM_FOR_TARGET="i386-elf-nm"   ★

% cd ../..
% make configure-target-libgcc
...
checking for target glibc version... 0.0
*** Configuration x86_16-unknown-elf not supported
make: *** [Makefile:12629: configure-target-libgcc] エラー 1
%

問題のエラーを回避できたが違うエラーが発生している. 今回の判明したこと

libgcc のビルドでコンパイルドライバ xgcc から起動されるアセンブラは cc1 のビルドディレクトリ
にある as というスクリプト.
通常であれば今回のようなエラーは発生しないのだが, x86_16-elf-gcc の生成するコードは
i386-elf-as によりアセンブルされるので通常とは状況が違うということ.

このため cc1 のビルドディレクトリにある as を直接変更してエラーを回避している.
