main のブレークポイントで停止して

(frv-elf-gdb) p f((struct S){5, 6})

とするとアドレス 0x14c で 0 番地アクセスが発生してしまう.

../test021

で確認すると

0x14c : ld @(gr18,gr0),gr5

で gr18 = 0xfe0 でこの命令を実行すれば gr5 = 5 になる.

f の先頭アドレスで $sp = 0xfe8 で

(frv-elf-gdb) x/2w $sp
0xfe8:	0	0
(frv-elf-gdb)

のようになっている.

../test021 で同様のことを確認すると

(frv-elf-gdb) x/2w $sp
0xfe0:	5	6
(frv-elf-gdb)

のように $sp は 0xfe0 ではあるが 5 と 6 がきている.

しかしこれはメモリアクセスエラーを引き起こす直接の原因ではない.
f の先頭アドレスで ../test021 は gr8 = 0xfe0 であるのに対して

このテストでは gr8 = 0 になっている.

../test022 を確認してみると期待通り動作している. compoud-literal を
正しく処理できていないらしい.



